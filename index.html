<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>多视频播放示例</title>
<style>
  body {
    margin: 0;
    background-color: #000;
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 20px;
    padding: 20px;
  }
  video {
    width: 30%;
    max-width: 480px;
    background-color: #000;
  }
</style>
</head>
<body>

<!-- 6 个视频标签 -->
<video id="video0" controls></video>
<video id="video1" controls></video>
<video id="video2" controls></video>
<video id="video3" controls></video>
<video id="video4" controls></video>
<video id="video5" controls></video>

<!-- 引入 hls.js -->
<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
<script>
  // Base64 编码的视频地址列表
  const videos = [
    "aHR0cHM6Ly92MjAyNS5maGJiZmYuY29tLzIwMjUwOTA3L2drOHVWRGMvaW5kZXgubTN1OA==", // 视频1
    "aHR0cHM6Ly92MjAyNS5maGJiZmYuY29tLzIwMjUwNjI5L2hBN2l0blVkL2luZGV4Lm0zdTg=", // 视频2
    "aHR0cHM6Ly92MjAyNC5maGJiZmYuY29tLzIwMjQxMTE5L2dvbGp6a2lNL2luZGV4Lm0zdTg3", // 视频3
    "aHR0cHM6Ly92MjAyNS5maGJiZmYuY29tLzIwMjUwOTA3L2drOHVWRGNaL2luZGV4Lm0zdTg=", // 视频4
    "aHR0cHM6Ly92MjAyNS5maGJiZmYuY29tLzIwMjUwOTA3L2drOHVWRGMvaW5kZXgubTN1OA==
", // 视频5
    "BASE64_VIDEO_6"  // 视频6
  ];

  videos.forEach((base64Url, index) => {
    const url = atob(base64Url); // 解码 Base64
    const video = document.getElementById(`video${index}`);
    const storageKey = `video_last_time_${index}`; // 每个视频独立存储

    // 加载上次播放时间
    function loadTime() {
      const lastTime = localStorage.getItem(storageKey);
      if (lastTime) video.currentTime = parseFloat(lastTime);
    }

    // 保存播放时间
    function saveTime() {
      localStorage.setItem(storageKey, video.currentTime);
    }

    if (Hls.isSupported()) {
      const hls = new Hls();
      hls.loadSource(url);
      hls.attachMedia(video);
      hls.on(Hls.Events.MANIFEST_PARSED, loadTime);
    } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
      video.src = url;
      video.addEventListener('loadedmetadata', loadTime);
    }

    video.addEventListener('timeupdate', saveTime);
  });
</script>
</body>
</html>
